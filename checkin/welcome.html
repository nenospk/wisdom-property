<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Wisdom Smart Office | Soft Opening Event 11.09.2020</title>
		<meta
			name="title"
			content="Wisdom Smart Office | Soft Opening Event 11.09.2020"
		/>
		<meta
			name="description"
			content="The Wisdom Smart Office โครงการ Smart home office แห่งแรกในเมืองระยองตอบโจทย์ทุกความต้องการทำเลทองแห่งอนาคตมาพร้อมนวัตกรรมอำนวยความสะดวกเพื่อยกระดับชีวิตของคุณ โครงการคุณภาพโดย 888 Wisdom Property"
		/>
		<link rel="canonical" href="https://wisdomprop.com/" />

		<!-- Open Graph / Facebook -->
		<meta property="og:type" content="website" />
		<meta property="og:url" content="https://wisdomprop.com/" />
		<meta
			property="og:title"
			content="Wisdom Smart Office | Soft Opening Event 11.09.2020"
		/>
		<meta
			property="og:description"
			content="The Wisdom Smart Office โครงการ Smart home office แห่งแรกในเมืองระยองตอบโจทย์ทุกความต้องการทำเลทองแห่งอนาคตมาพร้อมนวัตกรรมอำนวยความสะดวกเพื่อยกระดับชีวิตของคุณ โครงการคุณภาพโดย 888 Wisdom Property"
		/>
		<meta
			property="og:image"
			content="https://wisdomprop.com/img/logo_social_thumbnail.png"
		/>

		<!-- Twitter -->
		<meta property="twitter:card" content="summary_large_image" />
		<meta property="twitter:url" content="https://wisdomprop.com/" />
		<meta
			property="twitter:title"
			content="Wisdom Smart Office | Soft Opening Event 11.09.2020"
		/>
		<meta
			property="twitter:description"
			content="The Wisdom Smart Office โครงการ Smart home office แห่งแรกในเมืองระยองตอบโจทย์ทุกความต้องการทำเลทองแห่งอนาคตมาพร้อมนวัตกรรมอำนวยความสะดวกเพื่อยกระดับชีวิตของคุณ โครงการคุณภาพโดย 888 Wisdom Property"
		/>
		<meta
			property="twitter:image"
			content="https://wisdomprop.com/img/logo_social_thumbnail.png"
		/>

		<meta property="og:locale" content="th_TH" />
		<meta
			name="keywords"
			content="wisdom smart office, the wisdom smart office, 888 wisdom property, mini office home, smart home, smart office, rayong"
		/>
		<meta name="robots" content="index, follow" />
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<link
			rel="icon"
			href="../img/favicon.ico"
			type="image/x-icon"
			sizes="16x16"
		/>
		<link
			rel="stylesheet"
			href="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
		/>
		<link rel="stylesheet" type="text/css" href="../css/style.css" />
		<link rel="stylesheet" type="text/css" href="../css/animate.css" />
		<link rel="stylesheet" type="text/css" href="../css/lightgallery.css" />
		<link rel="stylesheet" href="../css/paver.css" />

		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>

		<script src="../js/app.js"></script>
		<script src="../js/jquery.countdown.min.js"></script>

		<script type="application/ld+json">
			{
				"@context": "http://schema.org",
				"@type": "Organization",
				"name": "Wisdom Smart Office by 888 Wisdom Property",
				"url": "https://wisdomprop.com",
				"address": "65/10 ถนนสุขุมวิท ตำบลเนินพระ อำเภอ เมือง, ระยอง 21150",
				"contactPoint": {
					"@type": "ContactPoint",
					"telephone": "+66642397892",
					"contactType": "Customer service"
				},
				"sameAs": ["https://www.facebook.com/888wisdomproperty"]
			}
		</script>
	</head>
	<body>
		<div style="display: table; width: 100%; height: 100%">
			<div class="welcome">
				<div>
					<img
						src="../img/event/under-logo.png"
						style="
							max-width: 250px;
							width: 100%;
							margin: 0 auto;
							padding-bottom: 30px;
						"
					/>
				</div>
				<div>
					<img
						src="../img/event/soft-opening.png"
						style="
							max-width: 450px;
							width: 100%;
							margin: 0 auto;
							padding-bottom: 80px;
						"
					/>
				</div>

				<div style="color: white">
					<h1>ยินดีต้อนรับคุณ _GUEST_ เข้าสู่งาน</h1>
				</div>
			</div>
		</div>

		<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-throttle-debounce/1.1/jquery.ba-throttle-debounce.min.js"></script>
		<script type="text/javascript" src="../js/jquery.paver.min.js"></script>

		<!-- The core Firebase JS SDK is always required and must be listed first -->
		<script src="https://www.gstatic.com/firebasejs/7.19.1/firebase-app.js"></script>

		<!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries -->
		<script src="https://www.gstatic.com/firebasejs/7.19.1/firebase-analytics.js"></script>
		<script src="https://www.gstatic.com/firebasejs/7.19.1/firebase-database.js"></script>

		<script>
			// Your web app's Firebase configuration
			var firebaseConfig = {
				apiKey: "AIzaSyCuOKyZKQSMYM9vP930hbrnAehcJOcUgcY",
				authDomain: "wisdom-property.firebaseapp.com",
				databaseURL: "https://wisdom-property.firebaseio.com",
				projectId: "wisdom-property",
				storageBucket: "wisdom-property.appspot.com",
				messagingSenderId: "425784022109",
				appId: "1:425784022109:web:8809bf6947a744f963a9b4",
				measurementId: "G-P7E4K8SFB4",
			};
			// Initialize Firebase
			firebase.initializeApp(firebaseConfig);
			firebase.analytics();
		</script>

		<script type="text/javascript">
			var unit_reserve_status = {
				unit_1: 0,
				unit_2: 0,
				unit_3: 0,
				unit_4: 0,
				unit_5: 0,
				unit_6: 0,
				unit_7: 0,
				unit_8: 0,
				unit_9: 0,
				unit_10: 0,
				unit_11: 0,
				unit_12: 0,
				unit_13: 0,
				unit_14: 0,
				unit_15: 0,
				unit_16: 0,
				unit_16: 0,
				unit_17: 0,
				unit_18: 0,
				unit_19: 0,
			};
			var unit_reserve_all = 0;
			var unit_interest_status = {
				unit_1: 0,
				unit_2: 0,
				unit_3: 0,
				unit_4: 0,
				unit_5: 0,
				unit_6: 0,
				unit_7: 0,
				unit_8: 0,
				unit_9: 0,
				unit_10: 0,
				unit_11: 0,
				unit_12: 0,
				unit_13: 0,
				unit_14: 0,
				unit_15: 0,
				unit_16: 0,
				unit_16: 0,
				unit_17: 0,
				unit_18: 0,
				unit_19: 0,
			};
			var unit_interest_all = 0;

			function addInterestData(name, email, phone, interest) {
				var dateString = new Date().toLocaleString("en-US", {
					timeZone: "Asia/Bangkok",
				});
				firebase
					.database()
					.ref("interest/" + phone)
					.set(
						{
							name: name,
							phone: phone,
							email: email,
							interest: interest,
							timestamp: dateString,
						},
						function (error) {
							if (error) {
								// The write failed...
							} else {
								// Data saved successfully!
								alert("การลงทะเบียนความสนใจสำเร็จ");
								location.reload();
							}
						}
					);
			}

			function addReserveData(name, email, phone, reserve, sales) {
				var dateString = new Date().toLocaleString("en-US", {
					timeZone: "Asia/Bangkok",
				});
				firebase
					.database()
					.ref("reserve/" + phone)
					.set(
						{
							name: name,
							phone: phone,
							email: email,
							reserve: reserve,
							sales: sales,
							timestamp: dateString,
						},
						function (error) {
							if (error) {
								// The write failed...
							} else {
								// Data saved successfully!
								alert("การลงทะเบียนการจองสำเร็จ");
							}
						}
					);
			}

			var ref_interest = firebase.database().ref("interest/");
			ref_interest.on(
				"value",
				function (snapshot) {
					//console.log(snapshot.val());
					unit_interest_status = {
						unit_1: 0,
						unit_2: 0,
						unit_3: 0,
						unit_4: 0,
						unit_5: 0,
						unit_6: 0,
						unit_7: 0,
						unit_8: 0,
						unit_9: 0,
						unit_10: 0,
						unit_11: 0,
						unit_12: 0,
						unit_13: 0,
						unit_14: 0,
						unit_15: 0,
						unit_16: 0,
						unit_16: 0,
						unit_17: 0,
						unit_18: 0,
						unit_19: 0,
					};
					unit_interest_all = 0;
					var counter = 0;
					snapshot.forEach((child) => {
						//console.log(child.key, child.val());
						var object = child.val();
						$("#myInterestTable > tbody").append(
							"<tr><td>" +
								++counter +
								"</td><td>" +
								object.name +
								"</td><td>" +
								object.phone +
								"</td><td>" +
								object.email +
								"</td><td>" +
								object.timestamp +
								"</td><td>" +
								object.interest.toString() +
								"</td></tr>"
						);

						var interest_unit = child.val().interest;
						interest_unit.forEach(function (unit) {
							unit_interest_status[unit] += 1;
							unit_interest_all += 1;
							//console.log(unit);
						});
						//unit_interest_status[interest_unit] += 1;
						//unit_interest_all += 1;
					});

					console.log("All Interest", unit_interest_all);
					console.log(unit_interest_status);
					for (const property in unit_interest_status) {
						//console.log(`${property}: ${unit_interest_status[property]}`);
						//console.log(selector);
						var selector = "span#" + property;
						$(selector).html(unit_interest_status[property] + " คนสนใจ");
					}
				},
				function (error) {
					console.log("Error: " + error.code);
				}
			);

			var ref_reserve = firebase.database().ref("reserve/");
			ref_reserve.on(
				"value",
				function (snapshot) {
					//console.log(snapshot.val());
					unit_reserve_status = {
						unit_1: 0,
						unit_2: 0,
						unit_3: 0,
						unit_4: 0,
						unit_5: 0,
						unit_6: 0,
						unit_7: 0,
						unit_8: 0,
						unit_9: 0,
						unit_10: 0,
						unit_11: 0,
						unit_12: 0,
						unit_13: 0,
						unit_14: 0,
						unit_15: 0,
						unit_16: 0,
						unit_16: 0,
						unit_17: 0,
						unit_18: 0,
						unit_19: 0,
					};
					unit_reserve_all = 0;

					$(".unit-each").removeClass("reserved");
					$("input[type=checkbox]").attr("disabled", false);

					var counter = 0;
					snapshot.forEach((child) => {
						//console.log(child.key, child.val());
						/* Display table*/
						var object = child.val();
						$("#myReserveTable > tbody").append(
							"<tr><td>" +
								++counter +
								"</td><td>" +
								object.name +
								"</td><td>" +
								object.phone +
								"</td><td>" +
								object.email +
								"</td><td>" +
								object.timestamp +
								"</td><td> " +
								object.sales +
								"</td><td>" +
								object.reserve.toString() +
								"</td></tr>"
						);

						var reserve_unit = child.val().reserve;
						reserve_unit.forEach(function (unit) {
							unit_reserve_status[unit] += 1;
							//console.log(unit);
							var selector_1 = ".unit-each #" + unit;
							$(selector_1).parent().addClass("reserved");
							var selector_2 = "input#" + unit;
							$(selector_2).attr("disabled", true);
						});
						//unit_reserve_status[reserve_unit] = 1;
					});

					for (const property in unit_interest_status) {
						//console.log(`${property}: ${unit_reserve_status[property]}`);
						if (unit_reserve_status[property] > 0) unit_reserve_all += 1;
						//console.log(unit_reserve_all);
						//unit_reserve_all += unit_reserve_status[property];
					}

					console.log("All Reserve", unit_reserve_all);
					console.log(unit_reserve_status);
					var unit_left = 10 - unit_reserve_all;
					$("#all_reserve").html(
						"<div class='unit-left-count'>" +
							unit_left +
							"</div> units remaining"
					);
				},
				function (error) {
					console.log("Error: " + error.code);
				}
			);

			/*
							firebase
								.database()
								.ref("interest/")
								.orderByChild("interest")
								.equalTo("unit-0")
								.on("child_added", function (data) {
									console.log("Equal to filter: " + data.val().name);
								});
								*/
			/*addInterestData(
								"nenq",
								"suppakit.neno@gmail.com",
								"0945597195",
								"unit_3"
							);
							*/
			//addReserveData("nene", "suppakit.neno@gmail.com", "0945597193", "unit_8");

			//const scriptURL =
			("https://script.google.com/macros/s/AKfycbykam4L_0jXuBG9sg7gicrPDtoFSlQgsE_vGFG7mN9hKoGvT4hY/exec");

			const form2 = document.forms["signup-form-2"];

			form2.addEventListener("submit", (e) => {
				e.preventDefault();
				console.log("a");
				/*
								$(".form-msg-2").html("กำลังลงทะเบียน...");
								var myForm = new FormData(form2);
								//console.log(myForm);
								myForm.append("Timestamp", new Date().toLocaleString());
								$("#signup-form-2").toggle();
								fetch(scriptURL, { method: "POST", body: myForm })
									.then((response) => {
										//console.log(response);
										$(".form-msg-2").html(
											"ขอบคุณสำหรับการลงทะเบียนค่ะ <br>เราจะติดต่อท่านกลับเร็วๆนี้ค่ะ!"
										);
										//$("#signup-form").toggle();
										//alert("ขอบคุณสำหรับกรลงทะเบียนค่ะ เราจะติดต่อท่านกลับเร็วๆนี้!");
									})
									.catch((error) => console.error("Error!", error.message));
									*/

				var name = $("input[name=Name]").val();
				var email = $("input[name=Email]").val();
				var phone = $("input[name=Phone]").val();
				var sales = $("input[name=Salesperson]").val();
				//var selected_unit = $("input[name=unit]").val();
				if (!$("input[name=unit]:checked").val()) {
					alert("กรุณาเลือก Unit ที่สนใจ");
				} else {
					var selected_unit = $(":checkbox:checked")
						.map(function () {
							return $(this).val();
						})
						.get();
					addReserveData(name, email, phone, selected_unit, sales);
				}
				//console.log(selected_unit);
			});

			$("#timer").countdown("2020/09/12 00:00:00", function (event) {
				$(this).html(event.strftime("%H:%M:%S <br> time remaining"));
				//$(this).html(event.strftime("%-d day %H:%M:%S <br> time remaining"));
			});
		</script>
	</body>
</html>
